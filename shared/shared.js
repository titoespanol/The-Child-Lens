!function(){"use strict";const e=document.documentElement,t=document.getElementById("accentSelect"),n=document.getElementById("darkToggle"),o=document.getElementById("audienceSelect"),s=document.getElementById("ageSelect"),c=document.getElementById("sidebar"),i=document.getElementById("sidebarToggle"),r=document.getElementById("scrollProgress"),a=document.getElementById("copyToast"),l={accent:"childlens-accent",theme:"childlens-theme",audience:"childlens-audience",age:"childlens-age",reduceMotion:"childlens-reduce-motion"};function d(e,t){try{localStorage.setItem(e,t)}catch(e){}}function u(e){try{return localStorage.getItem(e)}catch(e){return null}}function m(t){e.style.setProperty("--accent",t),e.style.setProperty("--accent-soft","color-mix(in srgb, "+t+" 15%, var(--color-cream))"),e.style.setProperty("--accent-medium","color-mix(in srgb, "+t+" 40%, var(--color-cream))"),e.style.setProperty("--accent-contrast","color-mix(in srgb, "+t+" 100%, #000 30%)"),e.style.setProperty("--accent-muted","color-mix(in srgb, "+t+" 25%, var(--color-cream))")}!function(){const c=u(l.accent),i=u(l.theme),r=u(l.audience),a=u(l.age),d=u(l.reduceMotion);if(c&&t){m(c),t.value=c;const e=t.closest(".custom-dropdown")?.querySelectorAll(".custom-dropdown-option");e&&e.forEach(e=>{if(e.classList.remove("selected"),e.dataset.value===c){e.classList.add("selected");const n=t.closest(".custom-dropdown")?.querySelector(".dd-label");n&&(n.textContent=e.textContent.trim())}})}if("dark"===i&&(e.setAttribute("data-theme","dark"),n)){const e=n.querySelector(".toggle-icon");e&&(e.textContent="â˜€ï¸"),n.setAttribute("aria-pressed","true")}if(r&&o){e.setAttribute("data-audience",r),o.value=r;const t=o.closest(".custom-dropdown")?.querySelectorAll(".custom-dropdown-option");t&&t.forEach(e=>{if(e.dataset.value===r){e.classList.add("selected");const t=o.closest(".custom-dropdown")?.querySelector(".dd-label");t&&(t.textContent=e.textContent.trim())}})}if(a&&s){e.setAttribute("data-age",a),s.value=a;const t=s.closest(".custom-dropdown")?.querySelectorAll(".custom-dropdown-option");t&&t.forEach(e=>{if(e.dataset.value===a){e.classList.add("selected");const t=s.closest(".custom-dropdown")?.querySelector(".dd-label");t&&(t.textContent=e.textContent.trim())}})}if("true"===d){e.setAttribute("data-reduce-motion","true");const t=document.getElementById("reduceMotionToggle");t&&t.setAttribute("aria-pressed","true")}}(),t&&t.addEventListener("change",function(){const t=this.value;m(t),d(l.accent,t),e.dispatchEvent(new CustomEvent("childlens:settings-changed"))}),n&&n.addEventListener("click",function(){"dark"===e.getAttribute("data-theme")?(e.setAttribute("data-theme","light"),this.querySelector(".toggle-icon").textContent="ðŸŒ™",this.setAttribute("aria-pressed","false"),d(l.theme,"light")):(e.setAttribute("data-theme","dark"),this.querySelector(".toggle-icon").textContent="â˜€ï¸",this.setAttribute("aria-pressed","true"),d(l.theme,"dark"))});if(window.matchMedia("(prefers-reduced-motion: reduce)").matches){e.setAttribute("data-reduce-motion","true");const t=document.getElementById("reduceMotionToggle");t&&t.setAttribute("aria-pressed","true")}const g=document.getElementById("reduceMotionToggle");function h(){const e=document.querySelectorAll("section[id]");let t="";e.forEach(e=>{e.getBoundingClientRect().top<=120&&(t=e.id)}),(c?c.querySelectorAll(".sidebar-link"):[]).forEach(e=>{e.classList.toggle("active",e.getAttribute("href")==="#"+t)})}function p(){if(!r)return;const e=document.documentElement.scrollHeight-window.innerHeight;r.style.width=e>0?window.scrollY/e*100+"%":"0%"}g&&g.addEventListener("click",function(){const t="true"===e.getAttribute("data-reduce-motion");e.setAttribute("data-reduce-motion",t?"false":"true"),this.setAttribute("aria-pressed",String(!t)),d(l.reduceMotion,!t),e.dispatchEvent(new CustomEvent("childlens:settings-changed"))}),o&&o.addEventListener("change",function(){e.setAttribute("data-audience",this.value),d(l.audience,this.value),e.dispatchEvent(new CustomEvent("childlens:settings-changed"))}),s&&s.addEventListener("change",function(){e.setAttribute("data-age",this.value),d(l.age,this.value),e.dispatchEvent(new CustomEvent("childlens:settings-changed"))}),i&&c&&!document.getElementById("sidebarOverlay")&&(i.addEventListener("click",function(){c.classList.toggle("open")}),c.addEventListener("click",function(e){e.target.classList.contains("sidebar-link")&&window.innerWidth<=960&&c.classList.remove("open")}));let v=!1;function y(e){a&&(a.textContent=e||"Copied!",a.classList.add("show"),setTimeout(()=>a.classList.remove("show"),1800))}function f(){const t=document.querySelectorAll(".media-backdrop__media--video"),n="true"===e.getAttribute("data-reduce-motion");t.forEach(function(e){n?e.pause():e.autoplay&&e.play().catch(function(){})})}window.addEventListener("scroll",function(){v||(requestAnimationFrame(()=>{h(),p(),v=!1}),v=!0)}),h(),p(),c&&c.querySelectorAll(".sidebar-group").forEach(function(e){var t=e.querySelector(".sidebar-group-header"),n=e.querySelector(".sidebar-group-items");t&&n&&(n.style.maxHeight=n.scrollHeight+"px",t.addEventListener("click",function(){e.classList.contains("collapsed")?(e.classList.remove("collapsed"),t.setAttribute("aria-expanded","true"),n.style.maxHeight=n.scrollHeight+"px"):(e.classList.add("collapsed"),t.setAttribute("aria-expanded","false"))}))}),function(){var e=document.getElementById("sidebarSearch"),t=document.getElementById("sidebarSearchClear"),n=document.getElementById("sidebarNoResults");if(e&&c){var o=c.querySelectorAll(".sidebar-link"),s=[];o.forEach(function(e){s.push({el:e,text:e.textContent.trim().toLowerCase(),originalHTML:e.innerHTML})}),e.addEventListener("input",function(){r(this.value)}),t&&t.addEventListener("click",function(){e.value="",e.focus(),r("")}),e.addEventListener("keydown",function(e){"Escape"===e.key&&(this.value="",r(""),this.blur())})}function i(e){var t=document.createElement("div");return t.textContent=e,t.innerHTML}function r(e){e=e.toLowerCase().trim();var t=0;s.forEach(function(n){if(!e)return n.el.style.display="",n.el.innerHTML=n.originalHTML,void t++;if(-1!==n.text.indexOf(e)){n.el.style.display="";var o=n.el.querySelector(".sidebar-link-icon"),s=o?o.outerHTML:"",c=n.el.textContent.trim(),r=c.toLowerCase().indexOf(e);if(-1!==r){var a=c.substring(0,r),l=c.substring(r,r+e.length),d=c.substring(r+e.length);n.el.innerHTML=s+i(a)+"<mark>"+i(l)+"</mark>"+i(d)}t++}else n.el.style.display="none"}),c.querySelectorAll(".sidebar-group").forEach(function(t){var n=t.querySelector(".sidebar-group-items");if(n){var o=!1;if(n.querySelectorAll(".sidebar-link").forEach(function(e){"none"!==e.style.display&&(o=!0)}),e&&!o)t.style.display="none";else if(t.style.display="",e&&t.classList.contains("collapsed")){t.classList.remove("collapsed");var s=t.querySelector(".sidebar-group-header");s&&s.setAttribute("aria-expanded","true"),n&&(n.style.maxHeight=n.scrollHeight+"px")}}}),n&&(n.style.display=e&&0===t?"block":"none")}}(),document.addEventListener("click",function(e){const t=e.target.closest("[data-copy]");if(!t)return;const n=t.getAttribute("data-copy");if(navigator.clipboard)navigator.clipboard.writeText(n).then(()=>y());else{const e=document.createElement("textarea");e.value=n,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),y()}}),document.querySelectorAll(".custom-dropdown").forEach(e=>{const t=e.querySelector(".custom-dropdown-trigger"),n=e.querySelector(".custom-dropdown-menu"),o=e.querySelectorAll(".custom-dropdown-option"),s=e.querySelector("select")||e.querySelector('input[type="hidden"]');t&&n&&(t.addEventListener("click",function(e){e.stopPropagation(),document.querySelectorAll(".custom-dropdown-menu.open").forEach(e=>{e!==n&&e.classList.remove("open")}),n.classList.toggle("open")}),o.forEach(e=>{e.addEventListener("click",function(e){e.stopPropagation();const c=this.dataset.value,i=this.textContent.trim();t.querySelector(".dd-label").textContent=i,o.forEach(e=>e.classList.remove("selected")),this.classList.add("selected"),n.classList.remove("open"),s&&(s.value=c,s.dispatchEvent(new Event("change")))})}),t.addEventListener("keydown",function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t.click()),"Escape"===e.key&&n.classList.remove("open")}))}),document.addEventListener("click",()=>{document.querySelectorAll(".custom-dropdown-menu.open").forEach(e=>e.classList.remove("open"))}),f(),e.addEventListener("childlens:settings-changed",f);const E=document.getElementById("sidebarOverlay");i&&c&&E&&(i.addEventListener("click",function(){const e=c.classList.toggle("open");E.classList.toggle("visible",e)}),E.addEventListener("click",function(){c.classList.remove("open"),E.classList.remove("visible")}),c.addEventListener("click",function(e){e.target.classList.contains("sidebar-link")&&window.innerWidth<=960&&(c.classList.remove("open"),E.classList.remove("visible"))})),window.childLensShared={showToast:y,root:e,persistSetting:d,loadSetting:u,LS_KEYS:l,checkBackdropVideos:f,initLiquidNav:function(e){if(e){var t=e.classList.contains("pattern-phone-nav")?".pattern-phone-nav-item":".nav-bottom-item";e.addEventListener("click",function(n){var o=n.target.closest(t);o&&!o.classList.contains("active")&&(e.querySelectorAll(t).forEach(function(e){e.classList.remove("active")}),o.classList.add("active"))})}}}}();