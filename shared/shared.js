!function(){"use strict";const e=document.documentElement,t=document.getElementById("accentSelect"),n=document.getElementById("darkToggle"),i=document.getElementById("audienceSelect"),a=document.getElementById("ageSelect"),o=document.getElementById("sidebar"),s=document.getElementById("sidebarToggle"),r=document.getElementById("scrollProgress"),c=document.getElementById("copyToast"),l={accent:"childlens-accent",theme:"childlens-theme",audience:"childlens-audience",age:"childlens-age",reduceMotion:"childlens-reduce-motion"};function d(e,t){try{localStorage.setItem(e,t)}catch(e){}}function u(e){try{return localStorage.getItem(e)}catch(e){return null}}function m(t){e.style.setProperty("--accent",t),e.style.setProperty("--accent-soft","color-mix(in srgb, "+t+" 15%, var(--color-cream))"),e.style.setProperty("--accent-medium","color-mix(in srgb, "+t+" 40%, var(--color-cream))"),e.style.setProperty("--accent-contrast","color-mix(in srgb, "+t+" 100%, #000 30%)"),e.style.setProperty("--accent-muted","color-mix(in srgb, "+t+" 25%, var(--color-cream))")}!function(){const o=u(l.accent),s=u(l.theme),r=u(l.audience),c=u(l.age),d=u(l.reduceMotion);if(o&&t){m(o),t.value=o;const e=t.closest(".custom-dropdown")?.querySelectorAll(".custom-dropdown-option");e&&e.forEach(e=>{if(e.classList.remove("selected"),e.dataset.value===o){e.classList.add("selected");const n=t.closest(".custom-dropdown")?.querySelector(".dd-label");n&&(n.textContent=e.textContent.trim())}})}if("dark"===s&&(e.setAttribute("data-theme","dark"),n)){const e=n.querySelector(".toggle-icon");e&&(e.textContent="â˜€ï¸"),n.setAttribute("aria-pressed","true")}if(r&&i){e.setAttribute("data-audience",r),i.value=r;const t=i.closest(".custom-dropdown")?.querySelectorAll(".custom-dropdown-option");t&&t.forEach(e=>{if(e.dataset.value===r){e.classList.add("selected");const t=i.closest(".custom-dropdown")?.querySelector(".dd-label");t&&(t.textContent=e.textContent.trim())}})}if(c&&a){e.setAttribute("data-age",c),a.value=c;const t=a.closest(".custom-dropdown")?.querySelectorAll(".custom-dropdown-option");t&&t.forEach(e=>{if(e.dataset.value===c){e.classList.add("selected");const t=a.closest(".custom-dropdown")?.querySelector(".dd-label");t&&(t.textContent=e.textContent.trim())}})}if("true"===d){e.setAttribute("data-reduce-motion","true");const t=document.getElementById("reduceMotionToggle");t&&t.setAttribute("aria-pressed","true")}}(),t&&t.addEventListener("change",function(){const t=this.value;m(t),d(l.accent,t),e.dispatchEvent(new CustomEvent("childlens:settings-changed"))}),n&&n.addEventListener("click",function(){"dark"===e.getAttribute("data-theme")?(e.setAttribute("data-theme","light"),this.querySelector(".toggle-icon").textContent="ðŸŒ™",this.setAttribute("aria-pressed","false"),d(l.theme,"light")):(e.setAttribute("data-theme","dark"),this.querySelector(".toggle-icon").textContent="â˜€ï¸",this.setAttribute("aria-pressed","true"),d(l.theme,"dark"))});if(window.matchMedia("(prefers-reduced-motion: reduce)").matches){e.setAttribute("data-reduce-motion","true");const t=document.getElementById("reduceMotionToggle");t&&t.setAttribute("aria-pressed","true")}const f=document.getElementById("reduceMotionToggle");f&&f.addEventListener("click",function(){const t="true"===e.getAttribute("data-reduce-motion");e.setAttribute("data-reduce-motion",t?"false":"true"),this.setAttribute("aria-pressed",String(!t)),d(l.reduceMotion,!t),e.dispatchEvent(new CustomEvent("childlens:settings-changed"))}),i&&i.addEventListener("change",function(){e.setAttribute("data-audience",this.value),d(l.audience,this.value),e.dispatchEvent(new CustomEvent("childlens:settings-changed"))}),a&&a.addEventListener("change",function(){e.setAttribute("data-age",this.value),d(l.age,this.value),e.dispatchEvent(new CustomEvent("childlens:settings-changed"))});var h="";function g(e){e!==h&&(h=e,(o?o.querySelectorAll(".sidebar-link"):[]).forEach(function(t){t.classList.toggle("active",t.getAttribute("href")==="#"+e)}))}function p(){if(r){var e=document.documentElement.scrollHeight-window.innerHeight;r.style.width=e>0?window.scrollY/e*100+"%":"0%"}}!function(){var e=document.querySelectorAll("section[id]");if(e.length)if("IntersectionObserver"in window){var t=new Map,n=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting?t.set(e.target.id,e.boundingClientRect.top):t.delete(e.target.id)});var n="",i=1/0;t.forEach(function(e,t){var a=document.getElementById(t);if(a){var o=a.getBoundingClientRect().top;o<=150&&o>.5*-window.innerHeight&&o<i&&(i=o,n=t)}}),!n&&t.size>0&&t.forEach(function(e,t){n||(n=t)}),n&&g(n)},{rootMargin:"-60px 0px -40% 0px",threshold:0});e.forEach(function(e){n.observe(e)})}else window.addEventListener("scroll",function(){var t="";e.forEach(function(e){e.getBoundingClientRect().top<=120&&(t=e.id)}),g(t)})}(),s&&o&&!document.getElementById("sidebarOverlay")&&(s.addEventListener("click",function(){o.classList.toggle("open")}),o.addEventListener("click",function(e){e.target.classList.contains("sidebar-link")&&window.innerWidth<=960&&o.classList.remove("open")}));var v=document.querySelector(".global-header"),y=!1;function b(e){c&&(c.textContent=e||"Copied!",c.classList.add("show"),setTimeout(()=>c.classList.remove("show"),1800))}function E(){const t=document.querySelectorAll(".media-backdrop__media--video"),n="true"===e.getAttribute("data-reduce-motion");t.forEach(function(e){n?e.pause():e.autoplay&&e.play().catch(function(){})})}window.addEventListener("scroll",function(){y||(requestAnimationFrame(function(){p(),v&&v.classList.toggle("scrolled",window.scrollY>10),y=!1}),y=!0)}),p(),function(){if("IntersectionObserver"in window)if("true"!==e.getAttribute("data-reduce-motion")){var t=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&(e.target.classList.add("is-visible"),t.unobserve(e.target))})},{rootMargin:"0px 0px -80px 0px",threshold:.01});document.querySelectorAll(".card, .doctrine, .callout, .ecosystem-card, .do-dont-card, .metric-card, .pattern-detail, .data-table, .scorecard").forEach(function(e){e.classList.contains("reveal")||e.classList.contains("is-visible")||e.classList.contains("section-header")||e.classList.add("reveal")}),document.querySelectorAll(".ecosystem-grid, .do-dont-grid, .metrics-grid, .doctrines-grid").forEach(function(e){e.classList.add("reveal-stagger")});var n=document.querySelectorAll(".reveal, .section-header");n.forEach(function(e){t.observe(e)}),requestAnimationFrame(function(){n.forEach(function(e){if(!e.classList.contains("is-visible")){var n=e.getBoundingClientRect();n.top<window.innerHeight&&n.bottom>0&&(e.classList.add("is-visible"),t.unobserve(e))}})}),e.addEventListener("childlens:settings-changed",function(){"true"===e.getAttribute("data-reduce-motion")&&document.querySelectorAll(".reveal, .section-header").forEach(function(e){e.classList.add("is-visible")})})}else document.querySelectorAll(".reveal, .section-header").forEach(function(e){e.classList.add("is-visible")});else document.querySelectorAll(".reveal, .section-header").forEach(function(e){e.classList.add("is-visible")})}(),o&&o.querySelectorAll(".sidebar-group").forEach(function(e){var t=e.querySelector(".sidebar-group-header"),n=e.querySelector(".sidebar-group-items");t&&n&&(n.style.maxHeight=n.scrollHeight+"px",t.addEventListener("click",function(){e.classList.contains("collapsed")?(e.classList.remove("collapsed"),t.setAttribute("aria-expanded","true"),n.style.maxHeight=n.scrollHeight+"px"):(e.classList.add("collapsed"),t.setAttribute("aria-expanded","false"))}))}),function(){var e=document.getElementById("sidebarSearch"),t=document.getElementById("sidebarSearchClear"),n=document.getElementById("sidebarNoResults");if(e&&o){var i=o.querySelectorAll(".sidebar-link"),a=[];i.forEach(function(e){a.push({el:e,text:e.textContent.trim().toLowerCase(),originalHTML:e.innerHTML})}),e.addEventListener("input",function(){r(this.value)}),t&&t.addEventListener("click",function(){e.value="",e.focus(),r("")}),e.addEventListener("keydown",function(e){"Escape"===e.key&&(this.value="",r(""),this.blur())})}function s(e){var t=document.createElement("div");return t.textContent=e,t.innerHTML}function r(e){e=e.toLowerCase().trim();var t=0;a.forEach(function(n){if(!e)return n.el.style.display="",n.el.innerHTML=n.originalHTML,void t++;if(-1!==n.text.indexOf(e)){n.el.style.display="";var i=n.el.querySelector(".sidebar-link-icon"),a=i?i.outerHTML:"",o=n.el.textContent.trim(),r=o.toLowerCase().indexOf(e);if(-1!==r){var c=o.substring(0,r),l=o.substring(r,r+e.length),d=o.substring(r+e.length);n.el.innerHTML=a+s(c)+"<mark>"+s(l)+"</mark>"+s(d)}t++}else n.el.style.display="none"}),o.querySelectorAll(".sidebar-group").forEach(function(t){var n=t.querySelector(".sidebar-group-items");if(n){var i=!1;if(n.querySelectorAll(".sidebar-link").forEach(function(e){"none"!==e.style.display&&(i=!0)}),e&&!i)t.style.display="none";else if(t.style.display="",e&&t.classList.contains("collapsed")){t.classList.remove("collapsed");var a=t.querySelector(".sidebar-group-header");a&&a.setAttribute("aria-expanded","true"),n&&(n.style.maxHeight=n.scrollHeight+"px")}}}),n&&(n.style.display=e&&0===t?"block":"none")}}(),document.addEventListener("click",function(e){const t=e.target.closest("[data-copy]");if(!t)return;const n=t.getAttribute("data-copy");if(navigator.clipboard)navigator.clipboard.writeText(n).then(()=>b());else{const e=document.createElement("textarea");e.value=n,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),b()}}),document.querySelectorAll(".custom-dropdown").forEach(e=>{const t=e.querySelector(".custom-dropdown-trigger"),n=e.querySelector(".custom-dropdown-menu"),i=e.querySelectorAll(".custom-dropdown-option"),a=e.querySelector("select")||e.querySelector('input[type="hidden"]');t&&n&&(t.addEventListener("click",function(e){e.stopPropagation(),document.querySelectorAll(".custom-dropdown-menu.open").forEach(e=>{e!==n&&e.classList.remove("open")}),n.classList.toggle("open")}),i.forEach(e=>{e.addEventListener("click",function(e){e.stopPropagation();const o=this.dataset.value,s=this.textContent.trim();t.querySelector(".dd-label").textContent=s,i.forEach(e=>e.classList.remove("selected")),this.classList.add("selected"),n.classList.remove("open"),a&&(a.value=o,a.dispatchEvent(new Event("change")))})}),t.addEventListener("keydown",function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t.click()),"Escape"===e.key&&n.classList.remove("open")}))}),document.addEventListener("click",()=>{document.querySelectorAll(".custom-dropdown-menu.open").forEach(e=>e.classList.remove("open"))}),E(),e.addEventListener("childlens:settings-changed",E);function x(t,n,i,a,o,s){var r=s||"";if("true"===e.getAttribute("data-reduce-motion"))return t.style.width=o+"px",void(t.style.transform="translateX("+a+"px)"+r);var c=a>n?1:-1,l=Math.abs(a-n),d=Math.min(.25*l,30),u=(n+a)/2,m=Math.max(i,o)+2*d,f=Math.min(.08*l,10)*c,h=[{transform:"translateX("+n+"px) scaleY(1) scaleX(1)"+r,width:i+"px",offset:0},{transform:"translateX("+n+"px) scaleY(0.65) scaleX(1.15)"+r,width:1.1*i+"px",offset:.12},{transform:"translateX("+(n+.2*(a-n))+"px) scaleY(0.55) scaleX(1.1)"+r,width:m+"px",offset:.3},{transform:"translateX("+(u-(m-o)/2)+"px) scaleY(0.5) scaleX(1.05)"+r,width:m+"px",offset:.55},{transform:"translateX("+(a+f)+"px) scaleY(1.18) scaleX(0.92)"+r,width:.92*o+"px",offset:.72},{transform:"translateX("+(a-.4*f)+"px) scaleY(0.9) scaleX(1.04)"+r,width:1.03*o+"px",offset:.84},{transform:"translateX("+(a+.12*f)+"px) scaleY(1.04) scaleX(0.98)"+r,width:o+"px",offset:.93},{transform:"translateX("+a+"px) scaleY(1) scaleX(1)"+r,width:o+"px",offset:1}];t._liquidAnim&&t._liquidAnim.cancel();var g=t.animate(h,{duration:600,easing:"cubic-bezier(0.22, 1, 0.36, 1)",fill:"none"});t.style.width=o+"px",t.style.transform="translateX("+a+"px)"+r,t._liquidAnim=g,g.finished.then(function(){t._liquidAnim=null}).catch(function(){})}function w(t,n,i){if(t&&!t._pillInit){t._pillInit=!0;var a=t.querySelector("."+i);a||((a=document.createElement("div")).className=i,t.appendChild(a)),a.style.display="block";var o,s=!1;t._ensurePositioned=l,requestAnimationFrame(l),t.addEventListener("click",function(e){var i=e.target.closest(n);if(i&&!i.classList.contains("active")){var a=t.querySelectorAll(n);a.forEach(function(e){e.style.transition="none"}),a.forEach(function(e){e.classList.remove("active")}),i.classList.add("active"),t.offsetHeight,c(i),requestAnimationFrame(function(){a.forEach(function(e){e.style.transition=""})})}}),window.addEventListener("resize",function(){clearTimeout(o),o=setTimeout(function(){r(t.querySelector(n+".active"))},100)}),e.addEventListener("childlens:settings-changed",function(){requestAnimationFrame(function(){r(t.querySelector(n+".active"))})})}function r(e){if(e){var n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),o=i.left-n.left,s=i.width;a._liquidAnim&&(a._liquidAnim.cancel(),a._liquidAnim=null),a.style.width=s+"px",a.style.transform="translateX("+o+"px)",a.style.opacity="1"}else a.style.opacity="0"}function c(e){if(e){var n,i,o=(n=parseFloat(a.style.width)||0,{x:(i=(a.style.transform||"").match(/translateX\(([^)]+)px\)/))?parseFloat(i[1]):0,w:n}),s=t.getBoundingClientRect(),c=e.getBoundingClientRect(),l=c.left-s.left,d=c.width;a.style.opacity="1",0===o.w||Math.abs(o.x-l)<1&&Math.abs(o.w-d)<1?r(e):x(a,o.x,o.w,l,d)}else a.style.opacity="0"}function l(){if(!s){var e=t.querySelector(n+".active");if(e){var i=t.getBoundingClientRect();i.width>0&&i.height>0&&(r(e),s=!0)}}}}function L(e){if(e&&!e._liquidNavInit){e._liquidNavInit=!0;var t=e.classList.contains("pattern-phone-nav");w(e,t?".pattern-phone-nav-item":".nav-bottom-item",t?"pattern-phone-nav-indicator":"nav-bottom-indicator")}}function q(e){e&&!e._segmentedInit&&(e._segmentedInit=!0,e.classList.add("has-indicator"),w(e,".segmented-item","segmented-indicator"))}function A(e){if(e&&!e._liquidTabsInit){e._liquidTabsInit=!0,e.classList.add("has-liquid-indicator"),e.style.position="relative";var t=document.createElement("div");t.className="tab-liquid-indicator",e.appendChild(t);var n=!1;requestAnimationFrame(o),setTimeout(o,100),setTimeout(o,400),setTimeout(o,1e3),e.addEventListener("click",function(t){var n=t.target.closest(".tab-item");if(n&&!n.classList.contains("active")){e.querySelectorAll(".tab-item").forEach(function(e){e.classList.remove("active")}),n.classList.add("active"),a(n);var i=e.parentElement?e.parentElement.querySelectorAll(".tab-panel"):[],o=Array.from(e.querySelectorAll(".tab-item")).indexOf(n);i.forEach(function(e,t){e.classList.toggle("active",t===o)})}}),window.addEventListener("resize",function(){var t=e.querySelector(".tab-item.active");t&&i(t)})}function i(n){if(n){var i=e.getBoundingClientRect(),a=n.getBoundingClientRect();t.style.width=a.width+"px",t.style.transform="translateX("+(a.left-i.left)+"px)",t.style.opacity="1",t._liquidAnim&&(t._liquidAnim.cancel(),t._liquidAnim=null)}else t.style.opacity="0"}function a(n){if(n){var a,o,s=(a=parseFloat(t.style.width)||0,{x:(o=(t.style.transform||"").match(/translateX\(([^)]+)px\)/))?parseFloat(o[1]):0,w:a}),r=e.getBoundingClientRect(),c=n.getBoundingClientRect(),l=c.left-r.left,d=c.width;t.style.opacity="1",0===s.w||Math.abs(s.x-l)<1&&Math.abs(s.w-d)<1?i(n):x(t,s.x,s.w,l,d)}else t.style.opacity="0"}function o(){if(!n){var t=e.querySelector(".tab-item.active");if(t)e.getBoundingClientRect().width>0&&(i(t),n=!0)}}}const S=document.getElementById("sidebarOverlay");s&&o&&S&&(s.addEventListener("click",function(){const e=o.classList.toggle("open");S.classList.toggle("visible",e)}),S.addEventListener("click",function(){o.classList.remove("open"),S.classList.remove("visible")}),o.addEventListener("click",function(e){e.target.classList.contains("sidebar-link")&&window.innerWidth<=960&&(o.classList.remove("open"),S.classList.remove("visible"))}));var C=[];document.querySelectorAll(".nav-bottom, .pattern-phone-nav").forEach(function(e){L(e),C.push(e)}),document.querySelectorAll(".segmented").forEach(function(e){q(e),C.push(e)}),document.querySelectorAll(".tabs").forEach(function(e){A(e)}),function(){if(o&&!o._liquidSidebarInit){o._liquidSidebarInit=!0,o.classList.add("has-liquid-indicator");var t=document.createElement("div");t.className="sidebar-liquid-indicator",o.style.position="relative",o.insertBefore(t,o.firstChild),requestAnimationFrame(s),setTimeout(s,150),setTimeout(s,500);var n=new MutationObserver(function(e){e.forEach(function(e){if("attributes"===e.type&&"class"===e.attributeName){var t=e.target;t.classList.contains("sidebar-link")&&t.classList.contains("active")&&a(t)}})});o.querySelectorAll(".sidebar-link").forEach(function(e){n.observe(e,{attributes:!0,attributeFilter:["class"]})}),o.addEventListener("click",function(e){e.target.closest(".sidebar-link")&&setTimeout(function(){var e=o.querySelector(".sidebar-link.active");e&&a(e)},50)})}function i(e){if(e){var n=o.getBoundingClientRect(),i=e.getBoundingClientRect(),a=i.top-n.top+o.scrollTop;t.style.height=i.height+"px",t.style.width=i.width+"px",t.style.transform="translateY("+a+"px)",t.style.opacity="1",t._liquidAnim&&(t._liquidAnim.cancel(),t._liquidAnim=null)}else t.style.opacity="0"}function a(n){if(n){var a,s,r=(a=parseFloat(t.style.height)||0,{y:(s=(t.style.transform||"").match(/translateY\(([^)]+)px\)/))?parseFloat(s[1]):0,h:a}),c=o.getBoundingClientRect(),l=n.getBoundingClientRect(),d=l.top-c.top+o.scrollTop,u=l.height;t.style.opacity="1",t.style.width=l.width+"px",0!==r.h?function(n,i,a,o){if("true"===e.getAttribute("data-reduce-motion"))return t.style.height=o+"px",void(t.style.transform="translateY("+a+"px)");var s=a>n?1:-1,r=Math.abs(a-n),c=Math.min(.2*r,20),l=(n+a)/2,d=Math.max(i,o)+c,u=Math.min(.06*r,8)*s,m=[{transform:"translateY("+n+"px) scaleX(1)",height:i+"px",offset:0},{transform:"translateY("+n+"px) scaleX(0.7)",height:i+"px",offset:.12},{transform:"translateY("+(l-c/2)+"px) scaleX(0.6)",height:d+"px",offset:.4},{transform:"translateY("+(a+u)+"px) scaleX(1.12)",height:.9*o+"px",offset:.72},{transform:"translateY("+(a-.3*u)+"px) scaleX(0.95)",height:o+"px",offset:.88},{transform:"translateY("+a+"px) scaleX(1)",height:o+"px",offset:1}];t._liquidAnim&&t._liquidAnim.cancel();var f=t.animate(m,{duration:600,easing:"cubic-bezier(0.22, 1, 0.36, 1)",fill:"none"});t.style.height=o+"px",t.style.transform="translateY("+a+"px)",t._liquidAnim=f,f.finished.then(function(){t._liquidAnim=null}).catch(function(){})}(r.y,r.h,d,u):i(n)}else t.style.opacity="0"}function s(){var e=o.querySelector(".sidebar-link.active");e&&o.getBoundingClientRect().height>0&&i(e)}}(),setTimeout(function e(){(C=C.filter(function(e){if(e._ensurePositioned){e._ensurePositioned();var t=e.querySelector(".nav-bottom-indicator, .pattern-phone-nav-indicator, .segmented-indicator");return t&&!t.style.width}return!1})).length&&setTimeout(e,500)},200),window.childLensShared={showToast:b,root:e,persistSetting:d,loadSetting:u,LS_KEYS:l,checkBackdropVideos:E,initLiquidNav:L,initSegmentedControl:q,initLiquidTabs:A}}();