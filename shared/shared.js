!function(){"use strict";const e=document.documentElement,t=document.getElementById("accentSelect"),n=document.getElementById("darkToggle"),o=document.getElementById("audienceSelect"),c=document.getElementById("ageSelect"),s=document.getElementById("sidebar"),i=document.getElementById("sidebarToggle"),r=document.getElementById("scrollProgress"),a=document.getElementById("copyToast"),d={accent:"childlens-accent",theme:"childlens-theme",audience:"childlens-audience",age:"childlens-age",reduceMotion:"childlens-reduce-motion"};function l(e,t){try{localStorage.setItem(e,t)}catch(e){}}function u(e){try{return localStorage.getItem(e)}catch(e){return null}}function m(t){e.style.setProperty("--accent",t),e.style.setProperty("--accent-soft","color-mix(in srgb, "+t+" 15%, var(--color-cream))"),e.style.setProperty("--accent-medium","color-mix(in srgb, "+t+" 40%, var(--color-cream))"),e.style.setProperty("--accent-contrast","color-mix(in srgb, "+t+" 100%, #000 30%)"),e.style.setProperty("--accent-muted","color-mix(in srgb, "+t+" 25%, var(--color-cream))")}!function(){const s=u(d.accent),i=u(d.theme),r=u(d.audience),a=u(d.age),l=u(d.reduceMotion);if(s&&t){m(s),t.value=s;const e=t.closest(".custom-dropdown")?.querySelectorAll(".custom-dropdown-option");e&&e.forEach(e=>{if(e.classList.remove("selected"),e.dataset.value===s){e.classList.add("selected");const n=t.closest(".custom-dropdown")?.querySelector(".dd-label");n&&(n.textContent=e.textContent.trim())}})}if("dark"===i&&(e.setAttribute("data-theme","dark"),n)){const e=n.querySelector(".toggle-icon");e&&(e.textContent="â˜€ï¸"),n.setAttribute("aria-pressed","true")}if(r&&o){e.setAttribute("data-audience",r),o.value=r;const t=o.closest(".custom-dropdown")?.querySelectorAll(".custom-dropdown-option");t&&t.forEach(e=>{if(e.dataset.value===r){e.classList.add("selected");const t=o.closest(".custom-dropdown")?.querySelector(".dd-label");t&&(t.textContent=e.textContent.trim())}})}if(a&&c){e.setAttribute("data-age",a),c.value=a;const t=c.closest(".custom-dropdown")?.querySelectorAll(".custom-dropdown-option");t&&t.forEach(e=>{if(e.dataset.value===a){e.classList.add("selected");const t=c.closest(".custom-dropdown")?.querySelector(".dd-label");t&&(t.textContent=e.textContent.trim())}})}if("true"===l){e.setAttribute("data-reduce-motion","true");const t=document.getElementById("reduceMotionToggle");t&&t.setAttribute("aria-pressed","true")}}(),t&&t.addEventListener("change",function(){const t=this.value;m(t),l(d.accent,t),e.dispatchEvent(new CustomEvent("childlens:settings-changed"))}),n&&n.addEventListener("click",function(){"dark"===e.getAttribute("data-theme")?(e.setAttribute("data-theme","light"),this.querySelector(".toggle-icon").textContent="ðŸŒ™",this.setAttribute("aria-pressed","false"),l(d.theme,"light")):(e.setAttribute("data-theme","dark"),this.querySelector(".toggle-icon").textContent="â˜€ï¸",this.setAttribute("aria-pressed","true"),l(d.theme,"dark"))});if(window.matchMedia("(prefers-reduced-motion: reduce)").matches){e.setAttribute("data-reduce-motion","true");const t=document.getElementById("reduceMotionToggle");t&&t.setAttribute("aria-pressed","true")}const g=document.getElementById("reduceMotionToggle");g&&g.addEventListener("click",function(){const t="true"===e.getAttribute("data-reduce-motion");e.setAttribute("data-reduce-motion",t?"false":"true"),this.setAttribute("aria-pressed",String(!t)),l(d.reduceMotion,!t),e.dispatchEvent(new CustomEvent("childlens:settings-changed"))}),o&&o.addEventListener("change",function(){e.setAttribute("data-audience",this.value),l(d.audience,this.value),e.dispatchEvent(new CustomEvent("childlens:settings-changed"))}),c&&c.addEventListener("change",function(){e.setAttribute("data-age",this.value),l(d.age,this.value),e.dispatchEvent(new CustomEvent("childlens:settings-changed"))});const h=s?s.querySelectorAll(".sidebar-link"):[];function v(){const e=document.querySelectorAll("section[id]");let t="";e.forEach(e=>{e.getBoundingClientRect().top<=120&&(t=e.id)}),h.forEach(e=>{e.classList.toggle("active",e.getAttribute("href")==="#"+t)})}function p(){if(!r)return;const e=document.documentElement.scrollHeight-window.innerHeight;r.style.width=e>0?window.scrollY/e*100+"%":"0%"}i&&s&&!document.getElementById("sidebarOverlay")&&(i.addEventListener("click",function(){s.classList.toggle("open")}),s.addEventListener("click",function(e){e.target.classList.contains("sidebar-link")&&window.innerWidth<=960&&s.classList.remove("open")}));let y=!1;function f(e){a&&(a.textContent=e||"Copied!",a.classList.add("show"),setTimeout(()=>a.classList.remove("show"),1800))}function E(){const t=document.querySelectorAll(".media-backdrop__media--video"),n="true"===e.getAttribute("data-reduce-motion");t.forEach(function(e){n?e.pause():e.autoplay&&e.play().catch(function(){})})}window.addEventListener("scroll",function(){y||(requestAnimationFrame(()=>{v(),p(),y=!1}),y=!0)}),v(),p(),document.addEventListener("click",function(e){const t=e.target.closest("[data-copy]");if(!t)return;const n=t.getAttribute("data-copy");if(navigator.clipboard)navigator.clipboard.writeText(n).then(()=>f());else{const e=document.createElement("textarea");e.value=n,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),f()}}),document.querySelectorAll(".custom-dropdown").forEach(e=>{const t=e.querySelector(".custom-dropdown-trigger"),n=e.querySelector(".custom-dropdown-menu"),o=e.querySelectorAll(".custom-dropdown-option"),c=e.querySelector("select")||e.querySelector('input[type="hidden"]');t&&n&&(t.addEventListener("click",function(e){e.stopPropagation(),document.querySelectorAll(".custom-dropdown-menu.open").forEach(e=>{e!==n&&e.classList.remove("open")}),n.classList.toggle("open")}),o.forEach(e=>{e.addEventListener("click",function(e){e.stopPropagation();const s=this.dataset.value,i=this.textContent.trim();t.querySelector(".dd-label").textContent=i,o.forEach(e=>e.classList.remove("selected")),this.classList.add("selected"),n.classList.remove("open"),c&&(c.value=s,c.dispatchEvent(new Event("change")))})}),t.addEventListener("keydown",function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t.click()),"Escape"===e.key&&n.classList.remove("open")}))}),document.addEventListener("click",()=>{document.querySelectorAll(".custom-dropdown-menu.open").forEach(e=>e.classList.remove("open"))}),E(),e.addEventListener("childlens:settings-changed",E);const L=document.getElementById("sidebarOverlay");i&&s&&L&&(i.addEventListener("click",function(){const e=s.classList.toggle("open");L.classList.toggle("visible",e)}),L.addEventListener("click",function(){s.classList.remove("open"),L.classList.remove("visible")}),s.addEventListener("click",function(e){e.target.classList.contains("sidebar-link")&&window.innerWidth<=960&&(s.classList.remove("open"),L.classList.remove("visible"))})),window.childLensShared={showToast:f,root:e,persistSetting:l,loadSetting:u,LS_KEYS:d,checkBackdropVideos:E,initLiquidNav:function(e){if(e){var t=e.classList.contains("pattern-phone-nav")?".pattern-phone-nav-item":".nav-bottom-item";e.addEventListener("click",function(n){var o=n.target.closest(t);o&&!o.classList.contains("active")&&(e.querySelectorAll(t).forEach(function(e){e.classList.remove("active")}),o.classList.add("active"))})}}}}();