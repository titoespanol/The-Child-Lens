!function(){"use strict";const e=document.documentElement,t=document.getElementById("accentSelect"),n=document.getElementById("darkToggle"),i=document.getElementById("audienceSelect"),o=document.getElementById("ageSelect"),s=document.getElementById("sidebar"),c=document.getElementById("sidebarToggle"),r=document.getElementById("scrollProgress"),a=document.getElementById("copyToast"),l={accent:"childlens-accent",theme:"childlens-theme",audience:"childlens-audience",age:"childlens-age",reduceMotion:"childlens-reduce-motion"};function d(e,t){try{localStorage.setItem(e,t)}catch(e){}}function u(e){try{return localStorage.getItem(e)}catch(e){return null}}function m(t){e.style.setProperty("--accent",t),e.style.setProperty("--accent-soft","color-mix(in srgb, "+t+" 15%, var(--color-cream))"),e.style.setProperty("--accent-medium","color-mix(in srgb, "+t+" 40%, var(--color-cream))"),e.style.setProperty("--accent-contrast","color-mix(in srgb, "+t+" 100%, #000 30%)"),e.style.setProperty("--accent-muted","color-mix(in srgb, "+t+" 25%, var(--color-cream))")}!function(){const s=u(l.accent),c=u(l.theme),r=u(l.audience),a=u(l.age),d=u(l.reduceMotion);if(s&&t){m(s),t.value=s;const e=t.closest(".custom-dropdown")?.querySelectorAll(".custom-dropdown-option");e&&e.forEach(e=>{if(e.classList.remove("selected"),e.dataset.value===s){e.classList.add("selected");const n=t.closest(".custom-dropdown")?.querySelector(".dd-label");n&&(n.textContent=e.textContent.trim())}})}if("dark"===c&&(e.setAttribute("data-theme","dark"),n)){const e=n.querySelector(".toggle-icon");e&&(e.textContent="â˜€ï¸"),n.setAttribute("aria-pressed","true")}if(r&&i){e.setAttribute("data-audience",r),i.value=r;const t=i.closest(".custom-dropdown")?.querySelectorAll(".custom-dropdown-option");t&&t.forEach(e=>{if(e.dataset.value===r){e.classList.add("selected");const t=i.closest(".custom-dropdown")?.querySelector(".dd-label");t&&(t.textContent=e.textContent.trim())}})}if(a&&o){e.setAttribute("data-age",a),o.value=a;const t=o.closest(".custom-dropdown")?.querySelectorAll(".custom-dropdown-option");t&&t.forEach(e=>{if(e.dataset.value===a){e.classList.add("selected");const t=o.closest(".custom-dropdown")?.querySelector(".dd-label");t&&(t.textContent=e.textContent.trim())}})}if("true"===d){e.setAttribute("data-reduce-motion","true");const t=document.getElementById("reduceMotionToggle");t&&t.setAttribute("aria-pressed","true")}}(),t&&t.addEventListener("change",function(){const t=this.value;m(t),d(l.accent,t),e.dispatchEvent(new CustomEvent("childlens:settings-changed"))}),n&&n.addEventListener("click",function(){"dark"===e.getAttribute("data-theme")?(e.setAttribute("data-theme","light"),this.querySelector(".toggle-icon").textContent="ðŸŒ™",this.setAttribute("aria-pressed","false"),d(l.theme,"light")):(e.setAttribute("data-theme","dark"),this.querySelector(".toggle-icon").textContent="â˜€ï¸",this.setAttribute("aria-pressed","true"),d(l.theme,"dark"))});if(window.matchMedia("(prefers-reduced-motion: reduce)").matches){e.setAttribute("data-reduce-motion","true");const t=document.getElementById("reduceMotionToggle");t&&t.setAttribute("aria-pressed","true")}const f=document.getElementById("reduceMotionToggle");f&&f.addEventListener("click",function(){const t="true"===e.getAttribute("data-reduce-motion");e.setAttribute("data-reduce-motion",t?"false":"true"),this.setAttribute("aria-pressed",String(!t)),d(l.reduceMotion,!t),e.dispatchEvent(new CustomEvent("childlens:settings-changed"))}),i&&i.addEventListener("change",function(){e.setAttribute("data-audience",this.value),d(l.audience,this.value),e.dispatchEvent(new CustomEvent("childlens:settings-changed"))}),o&&o.addEventListener("change",function(){e.setAttribute("data-age",this.value),d(l.age,this.value),e.dispatchEvent(new CustomEvent("childlens:settings-changed"))});var g="";function v(e){e!==g&&(g=e,(s?s.querySelectorAll(".sidebar-link"):[]).forEach(function(t){t.classList.toggle("active",t.getAttribute("href")==="#"+e)}))}function h(){if(r){var e=document.documentElement.scrollHeight-window.innerHeight;r.style.width=e>0?window.scrollY/e*100+"%":"0%"}}!function(){var e=document.querySelectorAll("section[id]");if(e.length)if("IntersectionObserver"in window){var t=new Map,n=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting?t.set(e.target.id,e.boundingClientRect.top):t.delete(e.target.id)});var n="",i=1/0;t.forEach(function(e,t){var o=document.getElementById(t);if(o){var s=o.getBoundingClientRect().top;s<=150&&s>.5*-window.innerHeight&&s<i&&(i=s,n=t)}}),!n&&t.size>0&&t.forEach(function(e,t){n||(n=t)}),n&&v(n)},{rootMargin:"-60px 0px -40% 0px",threshold:0});e.forEach(function(e){n.observe(e)})}else window.addEventListener("scroll",function(){var t="";e.forEach(function(e){e.getBoundingClientRect().top<=120&&(t=e.id)}),v(t)})}(),c&&s&&!document.getElementById("sidebarOverlay")&&(c.addEventListener("click",function(){s.classList.toggle("open")}),s.addEventListener("click",function(e){e.target.classList.contains("sidebar-link")&&window.innerWidth<=960&&s.classList.remove("open")}));var p=document.querySelector(".global-header"),y=!1;function E(e){a&&(a.textContent=e||"Copied!",a.classList.add("show"),setTimeout(()=>a.classList.remove("show"),1800))}function L(){const t=document.querySelectorAll(".media-backdrop__media--video"),n="true"===e.getAttribute("data-reduce-motion");t.forEach(function(e){n?e.pause():e.autoplay&&e.play().catch(function(){})})}function b(t){if(t&&!t._liquidNavInit){t._liquidNavInit=!0;var n=t.classList.contains("pattern-phone-nav"),i=n?".pattern-phone-nav-item":".nav-bottom-item",o=n?"pattern-phone-nav-indicator":"nav-bottom-indicator",s=t.querySelector("."+o);s||((s=document.createElement("div")).className=o,t.appendChild(s)),s.style.display="block";var c,r=!1;t._ensurePositioned=l,requestAnimationFrame(l),t.addEventListener("click",function(e){var n=e.target.closest(i);if(n&&!n.classList.contains("active")){var o=t.querySelectorAll(i);o.forEach(function(e){e.style.transition="none"}),o.forEach(function(e){e.classList.remove("active")}),n.classList.add("active"),t.offsetHeight,a(n,!1),requestAnimationFrame(function(){o.forEach(function(e){e.style.transition=""})})}}),window.addEventListener("resize",function(){clearTimeout(c),c=setTimeout(function(){a(t.querySelector(i+".active"),!0)},100)}),e.addEventListener("childlens:settings-changed",function(){requestAnimationFrame(function(){a(t.querySelector(i+".active"),!0)})})}function a(e,n){if(e){var i=t.getBoundingClientRect(),o=e.getBoundingClientRect(),c=o.left-i.left,r=o.width;n&&s.classList.add("no-transition"),s.style.width=r+"px",s.style.transform="translateX("+c+"px)",s.style.opacity="1",n&&(s.offsetHeight,s.classList.remove("no-transition"))}else s.style.opacity="0"}function l(){if(!r){var e=t.querySelector(i+".active");if(e){var n=t.getBoundingClientRect();n.width>0&&n.height>0&&(a(e,!0),r=!0)}}}}function w(e){if(e&&!e._segmentedInit){e._segmentedInit=!0,e.classList.add("has-indicator");var t=document.createElement("div");t.className="segmented-indicator",e.appendChild(t);e.querySelector(".segmented-item.active");var n,i=!1;e._ensurePositioned=s,requestAnimationFrame(s),e.addEventListener("click",function(t){var n=t.target.closest(".segmented-item");n&&!n.classList.contains("active")&&(e.querySelectorAll(".segmented-item").forEach(function(e){e.classList.remove("active")}),n.classList.add("active"),e.offsetHeight,o(n,!1))}),window.addEventListener("resize",function(){clearTimeout(n),n=setTimeout(function(){o(e.querySelector(".segmented-item.active"),!0)},100)})}function o(n,i){if(n){var o=e.getBoundingClientRect(),s=n.getBoundingClientRect(),c=s.left-o.left,r=s.width;i&&t.classList.add("no-transition"),t.style.width=r+"px",t.style.transform="translateX("+c+"px)",t.style.opacity="1",i&&(t.offsetHeight,t.classList.remove("no-transition"))}else t.style.opacity="0"}function s(){if(!i){var t=e.querySelector(".segmented-item.active");if(t){var n=e.getBoundingClientRect();n.width>0&&n.height>0&&(o(t,!0),i=!0)}}}}window.addEventListener("scroll",function(){y||(requestAnimationFrame(function(){h(),p&&p.classList.toggle("scrolled",window.scrollY>10),y=!1}),y=!0)}),h(),function(){if("IntersectionObserver"in window)if("true"!==e.getAttribute("data-reduce-motion")){var t=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&(e.target.classList.add("is-visible"),t.unobserve(e.target))})},{rootMargin:"0px 0px -80px 0px",threshold:.01});document.querySelectorAll(".card, .doctrine, .callout, .ecosystem-card, .do-dont-card, .metric-card, .pattern-detail, .data-table, .scorecard").forEach(function(e){e.classList.contains("reveal")||e.classList.contains("is-visible")||e.classList.contains("section-header")||e.classList.add("reveal")}),document.querySelectorAll(".ecosystem-grid, .do-dont-grid, .metrics-grid, .doctrines-grid").forEach(function(e){e.classList.add("reveal-stagger")});var n=document.querySelectorAll(".reveal, .section-header");n.forEach(function(e){t.observe(e)}),requestAnimationFrame(function(){n.forEach(function(e){if(!e.classList.contains("is-visible")){var n=e.getBoundingClientRect();n.top<window.innerHeight&&n.bottom>0&&(e.classList.add("is-visible"),t.unobserve(e))}})}),e.addEventListener("childlens:settings-changed",function(){"true"===e.getAttribute("data-reduce-motion")&&document.querySelectorAll(".reveal, .section-header").forEach(function(e){e.classList.add("is-visible")})})}else document.querySelectorAll(".reveal, .section-header").forEach(function(e){e.classList.add("is-visible")});else document.querySelectorAll(".reveal, .section-header").forEach(function(e){e.classList.add("is-visible")})}(),s&&s.querySelectorAll(".sidebar-group").forEach(function(e){var t=e.querySelector(".sidebar-group-header"),n=e.querySelector(".sidebar-group-items");t&&n&&(n.style.maxHeight=n.scrollHeight+"px",t.addEventListener("click",function(){e.classList.contains("collapsed")?(e.classList.remove("collapsed"),t.setAttribute("aria-expanded","true"),n.style.maxHeight=n.scrollHeight+"px"):(e.classList.add("collapsed"),t.setAttribute("aria-expanded","false"))}))}),function(){var e=document.getElementById("sidebarSearch"),t=document.getElementById("sidebarSearchClear"),n=document.getElementById("sidebarNoResults");if(e&&s){var i=s.querySelectorAll(".sidebar-link"),o=[];i.forEach(function(e){o.push({el:e,text:e.textContent.trim().toLowerCase(),originalHTML:e.innerHTML})}),e.addEventListener("input",function(){r(this.value)}),t&&t.addEventListener("click",function(){e.value="",e.focus(),r("")}),e.addEventListener("keydown",function(e){"Escape"===e.key&&(this.value="",r(""),this.blur())})}function c(e){var t=document.createElement("div");return t.textContent=e,t.innerHTML}function r(e){e=e.toLowerCase().trim();var t=0;o.forEach(function(n){if(!e)return n.el.style.display="",n.el.innerHTML=n.originalHTML,void t++;if(-1!==n.text.indexOf(e)){n.el.style.display="";var i=n.el.querySelector(".sidebar-link-icon"),o=i?i.outerHTML:"",s=n.el.textContent.trim(),r=s.toLowerCase().indexOf(e);if(-1!==r){var a=s.substring(0,r),l=s.substring(r,r+e.length),d=s.substring(r+e.length);n.el.innerHTML=o+c(a)+"<mark>"+c(l)+"</mark>"+c(d)}t++}else n.el.style.display="none"}),s.querySelectorAll(".sidebar-group").forEach(function(t){var n=t.querySelector(".sidebar-group-items");if(n){var i=!1;if(n.querySelectorAll(".sidebar-link").forEach(function(e){"none"!==e.style.display&&(i=!0)}),e&&!i)t.style.display="none";else if(t.style.display="",e&&t.classList.contains("collapsed")){t.classList.remove("collapsed");var o=t.querySelector(".sidebar-group-header");o&&o.setAttribute("aria-expanded","true"),n&&(n.style.maxHeight=n.scrollHeight+"px")}}}),n&&(n.style.display=e&&0===t?"block":"none")}}(),document.addEventListener("click",function(e){const t=e.target.closest("[data-copy]");if(!t)return;const n=t.getAttribute("data-copy");if(navigator.clipboard)navigator.clipboard.writeText(n).then(()=>E());else{const e=document.createElement("textarea");e.value=n,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),E()}}),document.querySelectorAll(".custom-dropdown").forEach(e=>{const t=e.querySelector(".custom-dropdown-trigger"),n=e.querySelector(".custom-dropdown-menu"),i=e.querySelectorAll(".custom-dropdown-option"),o=e.querySelector("select")||e.querySelector('input[type="hidden"]');t&&n&&(t.addEventListener("click",function(e){e.stopPropagation(),document.querySelectorAll(".custom-dropdown-menu.open").forEach(e=>{e!==n&&e.classList.remove("open")}),n.classList.toggle("open")}),i.forEach(e=>{e.addEventListener("click",function(e){e.stopPropagation();const s=this.dataset.value,c=this.textContent.trim();t.querySelector(".dd-label").textContent=c,i.forEach(e=>e.classList.remove("selected")),this.classList.add("selected"),n.classList.remove("open"),o&&(o.value=s,o.dispatchEvent(new Event("change")))})}),t.addEventListener("keydown",function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t.click()),"Escape"===e.key&&n.classList.remove("open")}))}),document.addEventListener("click",()=>{document.querySelectorAll(".custom-dropdown-menu.open").forEach(e=>e.classList.remove("open"))}),L(),e.addEventListener("childlens:settings-changed",L);const S=document.getElementById("sidebarOverlay");c&&s&&S&&(c.addEventListener("click",function(){const e=s.classList.toggle("open");S.classList.toggle("visible",e)}),S.addEventListener("click",function(){s.classList.remove("open"),S.classList.remove("visible")}),s.addEventListener("click",function(e){e.target.classList.contains("sidebar-link")&&window.innerWidth<=960&&(s.classList.remove("open"),S.classList.remove("visible"))}));var q=[];document.querySelectorAll(".nav-bottom, .pattern-phone-nav").forEach(function(e){b(e),q.push(e)}),document.querySelectorAll(".segmented").forEach(function(e){w(e),q.push(e)}),setTimeout(function e(){(q=q.filter(function(e){if(e._ensurePositioned){e._ensurePositioned();var t=e.querySelector(".nav-bottom-indicator, .pattern-phone-nav-indicator, .segmented-indicator");return t&&!t.style.width}return!1})).length&&setTimeout(e,500)},200),window.childLensShared={showToast:E,root:e,persistSetting:d,loadSetting:u,LS_KEYS:l,checkBackdropVideos:L,initLiquidNav:b,initSegmentedControl:w}}();